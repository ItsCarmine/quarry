{"id":"hq-0eq","title":"FastAPI endpoints + WebSocket for research streaming","description":"Expand main.py: POST /api/research (accept brief, start research), GET /api/reports/{id} (fetch report), WebSocket /ws/research/{id} (stream Typst updates live). Wire dispatcher-\u003esynthesizer-\u003etypst_generator pipeline. Persist to database.","status":"closed","priority":1,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:06.561618369Z","created_by":"mayor","updated_at":"2026-02-07T05:33:04.699243511Z","closed_at":"2026-02-07T05:33:04.699243511Z","close_reason":"Implemented: POST /api/research, GET /api/reports/{id}, WS /ws/research/{id} with full pipeline wiring","labels":["backend","mvp","quarry"],"dependencies":[{"issue_id":"hq-0eq","depends_on_id":"hq-a6b","type":"blocks","created_at":"2026-02-07T05:20:28.513127852Z","created_by":"mayor"},{"issue_id":"hq-0eq","depends_on_id":"hq-n6a","type":"blocks","created_at":"2026-02-07T05:20:28.569973271Z","created_by":"mayor"}]}
{"id":"hq-0t4","title":"WebSocket client: connect frontend to backend streaming","description":"Implement hooks/useWebSocket.ts. Connect to backend WS at /ws/research/{id}. Handle Typst source streaming updates, agent status messages, and error handling. Feed updates to ReportViewer and ChatSidebar.","status":"open","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:18.153356472Z","created_by":"mayor","updated_at":"2026-02-07T05:20:18.153356472Z","labels":["frontend","mvp","quarry"],"dependencies":[{"issue_id":"hq-0t4","depends_on_id":"hq-v9h","type":"blocks","created_at":"2026-02-07T05:20:32.154352506Z","created_by":"mayor"},{"issue_id":"hq-0t4","depends_on_id":"hq-0eq","type":"blocks","created_at":"2026-02-07T05:20:32.21905499Z","created_by":"mayor"}]}
{"id":"hq-610","title":"Synthesizer: merge backend results into structured report data","description":"Implement orchestrator/synthesizer.py. Takes list of ResearchResults from dispatcher, merges/deduplicates claims, builds citation list with provenance (LLM -\u003e source URL), produces structured data for Typst generation. For MVP single backend: focus on structuring output and basic provenance.","status":"closed","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:00.766131876Z","created_by":"mayor","updated_at":"2026-02-07T05:31:11.998932278Z","closed_at":"2026-02-07T05:31:11.998932278Z","close_reason":"Implemented and verified","labels":["backend","mvp","quarry"],"dependencies":[{"issue_id":"hq-610","depends_on_id":"hq-6o2","type":"blocks","created_at":"2026-02-07T05:20:26.232198108Z","created_by":"mayor"}]}
{"id":"hq-69h","title":"Claude backend: implement ResearchBackend for Anthropic API","description":"Implement backends/claude.py using httpx to call Anthropic API. Follow the ResearchBackend protocol in base.py. Accept query + sources, return ResearchResult with claims, source_urls, and confidence. Use API key from config.py. Single LLM backend for MVP.","status":"closed","priority":1,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:19:54.807302892Z","created_by":"mayor","updated_at":"2026-02-07T05:23:30.43323293Z","closed_at":"2026-02-07T05:23:30.43323293Z","close_reason":"Implemented backends/claude.py: Anthropic Messages API via httpx, JSON-structured claims output, code-fence stripping, graceful fallback on parse failure. Protocol conformance verified.","labels":["backend","mvp","quarry"]}
{"id":"hq-6o2","title":"Research dispatcher: query decomposition and fan-out","description":"Implement orchestrator/dispatcher.py. For MVP, takes a ResearchBrief and dispatches to the single Claude backend. Designed for future multi-backend fan-out. Returns list of ResearchResults.","status":"closed","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:19:57.000004095Z","created_by":"mayor","updated_at":"2026-02-07T05:30:33.074614961Z","closed_at":"2026-02-07T05:30:33.074614961Z","close_reason":"Implemented and verified","labels":["backend","mvp","quarry"],"dependencies":[{"issue_id":"hq-6o2","depends_on_id":"hq-69h","type":"blocks","created_at":"2026-02-07T05:20:25.691584102Z","created_by":"mayor"}]}
{"id":"hq-6sv","title":"Report viewer: typst.ts WASM live rendering component","description":"Implement components/ReportViewer.tsx. Integrate typst.ts WASM to compile Typst source to SVG/PDF in-browser. Receive Typst source updates via WebSocket and re-render in real-time. Hook useTypst.ts for WASM lifecycle.","status":"open","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:14.308937893Z","created_by":"mayor","updated_at":"2026-02-07T05:20:14.308937893Z","labels":["frontend","mvp","quarry"],"dependencies":[{"issue_id":"hq-6sv","depends_on_id":"hq-v9h","type":"blocks","created_at":"2026-02-07T05:20:29.489478581Z","created_by":"mayor"}]}
{"id":"hq-a6b","title":"Typst generator: produce Typst source from synthesized results","description":"Implement orchestrator/typst_generator.py. Takes synthesized report data and generates Typst source string using existing templates in typst/. Inserts content at QUARRY:CONTENT marker in report.typ. Uses citation.typ and conflict-box.typ. Supports incremental updates for streaming.","status":"closed","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:03.375411877Z","created_by":"mayor","updated_at":"2026-02-07T05:31:58.473513267Z","closed_at":"2026-02-07T05:31:58.473513267Z","close_reason":"Implemented and verified","labels":["backend","mvp","quarry"],"dependencies":[{"issue_id":"hq-a6b","depends_on_id":"hq-610","type":"blocks","created_at":"2026-02-07T05:20:27.149814913Z","created_by":"mayor"}]}
{"id":"hq-deacon","title":"Deacon (daemon beacon) - receives mechanical heartbeats, runs town plugins and monitoring.","description":"Deacon (daemon beacon) - receives mechanical heartbeats, runs town plugins and monitoring.\n\nrole_type: deacon\nrig: null\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"josh@clawd.bot","created_at":"2026-02-07T04:52:01.35739243Z","created_by":"Josh","updated_at":"2026-02-07T04:52:01.35739243Z","labels":["gt:agent"]}
{"id":"hq-kcg","title":"Basic provenance tracking: LLM -\u003e source URL citation chain","description":"Wire provenance through the full pipeline: Claude backend reports source URLs with claims -\u003e synthesizer preserves LLM attribution -\u003e typst generator renders citations with provenance. Each claim in the report links to which LLM reported it and what source URL it cited. Uses existing Citation model.","status":"closed","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:21.73807764Z","created_by":"mayor","updated_at":"2026-02-07T05:33:30.0895097Z","closed_at":"2026-02-07T05:33:30.0895097Z","close_reason":"Already wired through all layers: Claude backend (source_urls) -\u003e Synthesizer (llm_source + underlying_url) -\u003e TypstGenerator (cite-entry with LLM + URL) -\u003e DB (citations table) -\u003e API (GET /api/reports). Verified end-to-end.","labels":["backend","mvp","quarry"],"dependencies":[{"issue_id":"hq-kcg","depends_on_id":"hq-69h","type":"blocks","created_at":"2026-02-07T05:20:33.135716243Z","created_by":"mayor"},{"issue_id":"hq-kcg","depends_on_id":"hq-610","type":"blocks","created_at":"2026-02-07T05:20:33.23101004Z","created_by":"mayor"}]}
{"id":"hq-mayor","title":"Mayor - global coordinator, handles cross-rig communication and escalations.","description":"Mayor - global coordinator, handles cross-rig communication and escalations.\n\nrole_type: mayor\nrig: null\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"josh@clawd.bot","created_at":"2026-02-07T04:52:01.234358836Z","created_by":"Josh","updated_at":"2026-02-07T04:52:01.234358836Z","labels":["gt:agent"]}
{"id":"hq-n6a","title":"Database layer: SQLite schema and CRUD for briefs, reports, citations","description":"Implement db/database.py using aiosqlite. Create tables for ResearchBrief, Report, Citation, Conflict, Source. Provide async CRUD helpers. Models already defined in models/. Use quarry/crew/carmine/backend/db/.","status":"closed","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:19:52.073347515Z","created_by":"mayor","updated_at":"2026-02-07T05:30:33.081199127Z","closed_at":"2026-02-07T05:30:33.081199127Z","close_reason":"Implemented and verified","labels":["backend","mvp","quarry"]}
{"id":"hq-v9h","title":"React frontend scaffold: Vite + React + layout shell","description":"Initialize frontend/ with Vite + React 19 + TypeScript. Set up basic layout: center panel (report viewer area) + right sidebar (chat). Install typst.ts WASM package. Configure dev proxy to backend at localhost:8000. Create App.tsx with two-panel layout.","status":"in_progress","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:12.326844208Z","created_by":"mayor","updated_at":"2026-02-07T05:34:16.640331195Z","labels":["frontend","mvp","quarry"]}
{"id":"hq-yo9","title":"Chat sidebar: research input and follow-up UI","description":"Implement components/ChatSidebar.tsx. Freeform text input for research briefs. Display agent activity/status during research. Support follow-up questions that trigger additional research. Show message history.","status":"open","priority":2,"issue_type":"task","owner":"josh@clawd.bot","created_at":"2026-02-07T05:20:16.035364027Z","created_by":"mayor","updated_at":"2026-02-07T05:20:16.035364027Z","labels":["frontend","mvp","quarry"],"dependencies":[{"issue_id":"hq-yo9","depends_on_id":"hq-v9h","type":"blocks","created_at":"2026-02-07T05:20:30.77928163Z","created_by":"mayor"}]}
